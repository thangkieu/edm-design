(this["webpackJsonpedm-design"]=this["webpackJsonpedm-design"]||[]).push([[10],{269:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(294),a=n.n(r),c=n(292),i=n.n(c),s=n(311),u=n.n(s),o=(i.a.TextArea,a.a.Item);u.a.Button,u.a.Group},282:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={title:"EDM Composer",subTitle:"Generate a customised EDM design",footnote:"\xa9Created by Data Science & AI Division, GovTech"}},570:function(e,t,n){"use strict";n.r(t);var r,a,c,i,s,u,o=n(50),l=n(6),b=n.n(l),d=n(14),j=n(9),p=n(88),O=n(137),m=n(62),f=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.authPost("/email_otp",{body:JSON.stringify({email:t})});case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.debug(e.t0);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.authPost("/get_jwt_token",{body:JSON.stringify({email:t,otp:n})});case 3:if(r=e.sent){e.next=6;break}throw Error("Error");case 6:return Object(m.e)(r.jwt),e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.debug(e.t0),Object(m.c)();case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),x=n(388),g=n(0),v=n(15),y=n(7),w=n(65),k=n(13),T=w.d.div(r||(r=Object(p.a)(["\n  display: flex;\n  height: 100vh;\n  justify-content: flex-end;\n\n  ","\n"])),(function(e){return e.bg&&Object(w.c)(a||(a=Object(p.a)(["\n      background-image: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.5)), url('","');\n      background-size: cover;\n    "])),e.bg)})),S=w.d.div(c||(c=Object(p.a)(["\n  height: 100%;\n  max-width: 40em;\n  flex-grow: 1;\n  justify-self: flex-end;\n  background-color: white;\n  display: flex;\n  justify-content: center;\n  padding: 1em 4em;\n  flex-direction: column;\n  box-shadow: 0 0 10px 5px rgb(255 255 255 / 20%);\n"]))),C=Object(g.memo)((function(e){return Object(k.jsx)(T,{bg:"https://picsum.photos/id/1029/4887/2759",children:Object(k.jsx)(S,{children:e.children})})})),P=n(282),E=Object(g.memo)((function(e){return Object(k.jsx)(x.a.Title,{style:{margin:0},level:1,className:e.className,children:P.a.title})})),N=n(96),_=n(290),A=n(294),D=n.n(A),F=n(269),G=n(292),J=n.n(G),V=n(136),M=w.d.div(i||(i=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n"]))),R=w.d.div(s||(s=Object(p.a)(["\n  text-align: right;\n"]))),U=Object(w.d)(_.a)(u||(u=Object(p.a)(["\n  margin-right: -23px;\n"]))),z={email:""};function B(e,t){return e.email!==t.email}var I,L,q=Object(g.memo)((function(e){var t=e.loading,n=e.onSubmit,r=Object(g.useCallback)((function(e){null===n||void 0===n||n(e.email)}),[n]);return Object(k.jsxs)(D.a,{onFinish:r,layout:"vertical",initialValues:z,children:[Object(k.jsx)(x.a,{style:{marginBottom:"1rem"},children:"Enter your Email Addess and we will send you One-Time Password (OTP) to enter below."}),Object(k.jsx)(F.a,{label:"Email",name:"email",rules:[{required:!0,type:"email"}],children:Object(k.jsx)(J.a,{autoComplete:"off",placeholder:"abc@example.com",type:"email"})}),Object(k.jsx)(F.a,{shouldUpdate:B,children:function(e){return Object(k.jsxs)(M,{children:[Object(k.jsx)(_.a,{type:"primary",htmlType:"submit",loading:t,disabled:!e.getFieldValue("email"),children:"Get OTP"}),Object(k.jsxs)(R,{children:[Object(k.jsx)(x.a,{children:"Not a registered user yet?"}),Object(k.jsx)(U,{type:"link",children:Object(k.jsx)(V.b,{to:"https://google.com",children:"Contact Us."})})]})]})}})]})})),H=n(395),K=n(57),Q={otp:""},W=Object(w.d)(_.a)(I||(I=Object(p.a)(["\n  padding-left: 0;\n  padding-right: 0;\n"]))),X=Object(g.memo)((function(e){var t=e.loading,n=e.email,r=e.onSubmit,a=Object(g.useState)(!1),c=Object(j.a)(a,2),i=c[0],s=c[1],u=Object(g.useState)(""),o=Object(j.a)(u,2),l=o[0],p=o[1],O=Object(g.useRef)();Object(g.useEffect)((function(){return function(){O.current&&clearTimeout(O.current)}}),[]);var m=Object(g.useCallback)((function(e){e.otp&&(null===r||void 0===r||r(e.otp))}),[r]),h=Object(g.useCallback)(Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&Object(K.k)("email",n)){e.next=2;break}return e.abrupt("return");case 2:return s(!0),e.next=5,f(n);case 5:(null===(t=e.sent)||void 0===t?void 0:t.message)&&p(null===t||void 0===t?void 0:t.message),O.current=setTimeout((function(){p("")}),5e3),s(!1);case 9:case"end":return e.stop()}}),e)}))),[n]),v=Object(g.useMemo)((function(){return i?"Resending...":l||"Resend OTP"}),[i,l]);return Object(k.jsxs)(D.a,{onFinish:m,layout:"vertical",initialValues:Q,children:[Object(k.jsx)(x.a.Text,{type:"secondary",children:"An OTP has been emailed to you. Enter OTP below."}),Object(k.jsx)(F.a,{label:"One-Time Password",name:"otp",children:Object(k.jsx)(J.a,{placeholder:"OTP",type:"number"})}),Object(k.jsxs)(H.b,{children:[Object(k.jsx)(F.a,{style:{margin:0},shouldUpdate:function(e,t){return e.otp!==t.otp},children:function(e){return Object(k.jsx)(_.a,{type:"primary",htmlType:"submit",loading:t,disabled:!e.getFieldValue("otp"),children:"Login"})}}),l?Object(k.jsx)(x.a.Text,{type:"success",children:l}):Object(k.jsx)(W,{htmlType:"button",type:"link",onClick:h,children:v})]})]})})),Y=["jwt","expires_in"],Z=Object(w.d)(E)(L||(L=Object(p.a)(["\n  font-size: 3em;\n"]))),$=Object(g.memo)((function(){var e=Object(v.f)(),t=Object(g.useState)(!1),n=Object(j.a)(t,2),r=n[0],a=n[1],c=Object(g.useState)(1),i=Object(j.a)(c,2),s=i[0],u=i[1],l=Object(g.useState)(""),p=Object(j.a)(l,2),O=p[0],m=p[1],w=Object(y.l)(N.a),T=Object(g.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a(!0),e.next=5,f(t);case 5:if(n=e.sent,a(!1),n){e.next=9;break}return e.abrupt("return");case 9:m(t),u(2);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),S=Object(g.useCallback)(function(){var t=Object(d.a)(b.a.mark((function t(n){var r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(O&&n){t.next=2;break}return t.abrupt("return");case 2:return a(!0),t.next=5,h(O,n);case 5:if(r=t.sent,a(!1),r){t.next=9;break}return t.abrupt("return");case 9:r.jwt,r.expires_in,(c=Object(o.a)(r,Y)).email&&(w(c),e.push("/"));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[O,e,w]);return Object(k.jsxs)(C,{children:[Object(k.jsx)(Z,{}),Object(k.jsx)(x.a.Text,{type:"secondary",italic:!0,children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit."}),Object(k.jsx)("br",{}),1===s&&Object(k.jsx)(q,{loading:r,onSubmit:T}),2===s&&Object(k.jsx)(X,{loading:r,onSubmit:S,email:O})]})}));t.default=$}}]);
//# sourceMappingURL=10.e2630291.chunk.js.map